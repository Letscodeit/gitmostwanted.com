{% extends "layout.html" %}

{% set page_title = 'Attitude' %}

{% from "macros/navigation.html" import pagination %}
{% from "macros/attitude.html" import user_attitude %}

{% block body %}
  <dl class="sub-nav">
    <dd {{ 'class=active' if not attitude }}><a href="{{ url_for('user_attitude.unchecked') }}">Unchecked</a></dd>
    {% for r in ['like', 'dislike', 'neutral'] %}
      <dd {{ 'class=active' if attitude == r }}>
        <a href="{{ url_for('user_attitude.list_by_attitude', attitude=r) }}">{{ r|capitalize() }}</a>
      </dd>
    {% endfor %}
    <dd><a href="/">Trending</a></dd>
  </dl>

  <div class="row" id="gh-entries">
    <form class="filterGhEntries">
      <div class="small-9 medium-10 large-11 columns">
        <select name="lang">
          <option>All</option>
            {% for (lang,) in languages %}
              <option{{ ' selected="selected"' if request.args.get('lang') == lang }}>{{ lang }}</option>
            {% endfor %}
        </select>
      </div>
      <div class="small-3 medium-2 large-1 columns">
        <a href="#" class="button tiny">Reset</a>
      </div>
    </form>

    <div class="small-12 columns">
      <ul class="small-block-grid-1 medium-block-grid-2 large-block-grid-3">
        {% for (repo, attitude) in repos.items %}
          <li data-url="{{ repo.html_url }}">
            <div>
              <h4>
                <a href="{{ repo.html_url }}" target="_blank">{{ repo.full_name }}</a>
                {% if repo.language %}
                  <small class="right">{{ repo.language }}</small>
                {% endif %}
              </h4>

              {% if repo.homepage %}
                <a href="{{ repo.homepage }}" target="_blank">{{ repo.homepage }}</a>
              {% endif %}

              {% if repo.description %}
                <p>{{ repo.description }}</p>
              {% endif %}

              {{ user_attitude(repo.id, attitude) }}
            </div>
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>

  {{ pagination(repos, lang=request.args.get('lang')) }}
{% endblock %}
